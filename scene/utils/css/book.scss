// @media screen and (max-width: 800px) {
//     :root {
//         --bookSize:200px!important;
//     }
// }

#book {
    transform-style:preserve-3d ;
    height: 80vh;
    width: 56vw;
    display: grid;
    place-content: center;
}

#readBook {
    display: none;
}

#PORTFOLIO.anim #book #readBook:not(:checked) ~ #livre {
    animation: openBook var(--vitesseEntree) linear forwards;
}
#PORTFOLIO.anim #book #readBook:checked ~ #livre {
    animation: closeBook var(--vitesseSortie) linear forwards;
}
#PORTFOLIO.anim #book #readBook:not(:checked) ~ #livre .blocLivre.droite {
        animation: openBookRight var(--vitesseEntree) linear forwards;
}
#PORTFOLIO.anim #book #readBook:checked ~ #livre .blocLivre.droite {
    animation: closeBookRight var(--vitesseSortie) linear forwards;
}
#PORTFOLIO.anim #book #readBook:not(:checked) ~ #livre .blocLivre.gauche {
    animation: openBookLeft var(--vitesseEntree) linear forwards;
}
#PORTFOLIO.anim #book #readBook:checked ~ #livre .blocLivre.gauche {
    animation: closeBookLeft var(--vitesseSortie) linear forwards;
}

#livre {
    position: absolute;
    z-index: 20;
    transform-style: preserve-3d;
    align-self: center;
    justify-self: center;
    height:var(--livreLargeur);
    width:calc(140 / 99 * var(--livreLargeur) + var(--gapLivre));

    transform: translate3d(calc(-35 / 99 * var(--livreLargeur)), 0, 0) rotateY(90deg) rotateX(0deg) rotate(0deg);

    display:grid;
    grid-template-columns:calc(70 / 99 * var(--livreLargeur)) var(--gapLivre) calc(70 / 99 * var(--livreLargeur));
}

.blocLivre {
    position: absolute;
    transform-style: preserve-3d;
    cursor: pointer;

    height:var(--livreLargeur);
    width:calc(70 / 99 * var(--livreLargeur));
    height:var(--livreLargeur);

    box-shadow:
    0 0 30px 10px #fff,
    0 0 50px 20px var(--mainColor3),
    0 0 70px 30px var(--mainColor1);

    .fpage {
        position: absolute;
        transform-style:preserve-3d;
        transform-origin:inherit ;
        height: var(--livreLargeur);
        width:calc(70 / 99 * var(--livreLargeur));
        background-color: var(--bookPage);
        box-sizing: border-box;
        border: 1px solid var(--bookBorder);

        &::before {
            content:'';
            position: absolute;
            transform-origin: inherit;

            top:0;
            left:0;
            height: var(--livreLargeur);
            width:calc(70 / 99 * var(--livreLargeur));
            box-sizing: border-box;
            border: 1px solid var(--bookBorder);
            background-color: var(--bookPage);
        }

        &::after {
            content:'';
            position: absolute;
            transform-origin: inherit;

            top:0;
            left:0;
            height: var(--livreLargeur);
            width:calc(70 / 99 * var(--livreLargeur));
            box-sizing: border-box;
            border: 1px solid var(--bookBorder);
            background-color: var(--bookPage);
        }
    }

    &.gauche {
        grid-column: 1;
        transform-origin: right;
        transform: rotateY(88deg);

        @for $i from 0 to 4 {
            .fpage.gauche:nth-of-type(#{$i + 1}) {
                transform: translateZ(calc(3px * $i + 2px)) rotateY(calc(.4deg + (.6deg * $i)));
                &::before {
                    transform: translateZ(-2px) rotateY(-.4deg);
                }
                &::after {
                    transform: translateZ(2px) rotateY(.4deg);
                }
            }
        }

        .fpage.gauche:nth-of-type(1)::before {
            background-color: var(--bookBorder);
        }

        .fpage.gauche:nth-of-type(4)::after {
            background-image: var(--imageGauche);
            background-size: cover;
        }

        // .fpage.gauche:nth-of-type(4) {
        //     &::after {
        //         background:url('../../../divers/img/imgLWait1.jpg');
        //         background-size:cover;
        //         background-repeat: no-repeat;    
        //     }
        // }
    }

    &.droite {
        grid-column: 3;
        transform-origin: left;
        transform: rotateY(-88deg);

        @for $i from 0 to 4 {
            .fpage.droite:nth-of-type(#{$i + 1}) {
                transform: translateZ(calc(3px * $i + 2px)) rotateY(calc(-.4deg - (.6deg * $i)));
                &::before {
                    transform: translateZ(-2px) rotateY(.4deg);
                }
                &::after {
                    transform: translateZ(2px) rotateY(-.4deg);
                }
            }
        }

        .fpage.droite:nth-of-type(1)::before {
            background-color: var(--bookBorder);
        }

        .fpage.droite:nth-of-type(4)::after {
            background-image: url('../../../divers/img/1.jpg');
            background-size: cover;
        }
    }
}

@keyframes openBook {
    0% {
        transform: translate3d(calc(-35 / 99 * var(--livreLargeur)), 0, 0) rotateY(90deg);
    }

    50% {
        transform: translate3d(0, 0, 0) rotateY(10deg) rotateX(calc(var(--rotationLivre) / 2)) rotate(0deg);
        z-index: 20;
    }

    100% {
        transform: translate3d(var(--justifyLivre), var(--alignLivre), var(--zoomLivre)) rotateY(0deg) rotateX(var(--rotationLivre)) rotate(var(--inclinaisonLivre));
        z-index: 25;
    }
}

@keyframes closeBook {
    0% {
        transform: translate3d(var(--justifyLivre), var(--alignLivre), var(--zoomLivre)) rotateY(0deg) rotateX(var(--rotationLivre)) rotate(var(--inclinaisonLivre));
        z-index: 20;
    }

    50% {
        transform: translate3d(0, 0, 0) rotateY(10deg) rotateX(10deg) rotate(0deg);
        z-index: 20;
    }

    100% {
        transform: translate3d(calc(-35 / 99 * var(--livreLargeur)), 0, 0) rotateY(90deg);
        z-index: 20;
    }
}

@keyframes openBookLeft {
    from {
        transform: rotateY(88deg);
    }

    to {
        transform: rotateY(0deg);
    }
}

@keyframes closeBookLeft {
    from {
        transform: rotateY(0deg);
    }

    to {
        transform: rotateY(88deg);
    }
}

@keyframes openBookRight {
    from {
        transform: rotateY(-88deg);
    }

    to {
        transform: rotateY(-0deg);
    }
}

@keyframes closeBookRight {
    from {
        transform: rotateY(-0deg);
    }

    to {
        transform: rotateY(-88deg);
    }
}

.pages {
    position: absolute;
    top:0;
    left:0;
    height: var(--livreLargeur);
    width:calc(70 / 99 * var(--livreLargeur));
    transform-style: preserve-3d;
}

#pageG {
    transform-origin: right;
    transform: translateX(0px) translateZ(14px) rotateY(3deg);

    &.anim {
        animation: pageGauche var(--vitessePage) linear forwards;
    }

    &.anim .bandeGauche {
        animation: bandeGauche var(--vitessePage) linear forwards;
    }
}

#pageD {
    transform-origin: left;
    transform: translateX(0px) translateZ(14px) rotateY(-3deg);

    &.anim {
        animation: pageDroite var(--vitessePage) linear forwards;
    }

    &.anim .bandeDroite {
        animation: bandeDroite var(--vitessePage) linear forwards;
    }
}

.bandes {
    position: absolute;
    transform-style:preserve-3d;
    backface-visibility: hidden;

    height: var(--livreLargeur);
    width: calc(10 / 99 * var(--livreLargeur));
    background-size:calc(70 / 99 * var(--livreLargeur)) var(--livreLargeur);

    &::after {
        position: absolute;
        content:'';
        backface-visibility: hidden;
        transform-origin: center;

        top:0;
        left:0;
        height: var(--livreLargeur);
        width: calc(10 / 99 * var(--livreLargeur));
        transform: rotateY(180deg);

        background:var(--imageDroiteDos);
        background-size:calc(70 / 99 * var(--livreLargeur)) var(--livreLargeur);
    }
}

.bandeGauche {
    transform-origin: right;
    background:var(--imageGauche);
    right:0;

    &::after {
        background:var(--imageGaucheDos);
    }
}

#pageG > .bandeGauche {
    background-position: calc(10 / 99 * var(--livreLargeur)) center;

    .bandeGauche {
        right:calc(10 / 99 * var(--livreLargeur) - .5px);
    }

    &::after {
        background-position:calc(70 / 99 * var(--livreLargeur)) center;
    }
    
    > .bandeGauche {
        background-position: calc(20 / 99 * var(--livreLargeur)) center;
        &::after {
            background-position: calc(60 / 99 * var(--livreLargeur)) center;
        }

        > .bandeGauche {
            background-position: calc(30 / 99 * var(--livreLargeur)) center;
            &::after {
                background-position: calc(50 / 99 * var(--livreLargeur)) center;
            }

            > .bandeGauche {
                background-position: calc(40 / 99 * var(--livreLargeur)) center;
                &::after {
                    background-position: calc(40 / 99 * var(--livreLargeur)) center;
                }

                > .bandeGauche {
                    background-position: calc(50 / 99 * var(--livreLargeur)) center;
                    &::after {
                        background-position: calc(30 / 99 * var(--livreLargeur)) center;
                    }

                    > .bandeGauche {
                        background-position: calc(60 / 99 * var(--livreLargeur)) center;                
                        &::after {
                            background-position: calc(20 / 99 * var(--livreLargeur)) center;
                        }

                        > .bandeGauche {
                            background-position: calc(70 / 99 * var(--livreLargeur)) center;
                            &::after {
                                background-position: calc(10 / 99 * var(--livreLargeur)) center;
                            }
                        }
                    }
                }
            }
        }
    }
}

.bandeDroite {
    transform-origin: left;
    background:var(--imageDroite);

    &::after {
        background:var(--imageDroiteDos);
    }
}

#pageD > .bandeDroite {
    background-position: calc(70 / 99 * var(--livreLargeur)) center;

    .bandeDroite {
        left:calc(10 / 99 * var(--livreLargeur) - .5px);
    }

    &::after {
        background-position:calc(10 / 99 * var(--livreLargeur)) center;
    }
    
    > .bandeDroite {
        background-position: calc(60 / 99 * var(--livreLargeur)) center;
        &::after {
            background-position: calc(20 / 99 * var(--livreLargeur)) center;
        }

        > .bandeDroite {
            background-position: calc(50 / 99 * var(--livreLargeur)) center;
            &::after {
                background-position: calc(30 / 99 * var(--livreLargeur)) center;
            }

            > .bandeDroite {
                background-position: calc(40 / 99 * var(--livreLargeur)) center;
                &::after {
                    background-position: calc(40 / 99 * var(--livreLargeur)) center;
                }

                > .bandeDroite {
                    background-position: calc(30 / 99 * var(--livreLargeur)) center;
                    &::after {
                        background-position: calc(50 / 99 * var(--livreLargeur)) center;
                    }

                    > .bandeDroite {
                        background-position: calc(20 / 99 * var(--livreLargeur)) center;                
                        &::after {
                            background-position: calc(60 / 99 * var(--livreLargeur)) center;
                        }

                        > .bandeDroite {
                            background-position: calc(10 / 99 * var(--livreLargeur)) center;
                            &::after {
                                background-position: calc(70 / 99 * var(--livreLargeur)) center;
                            }
                        }
                    }
                }
            }
        }
    }
}

@keyframes pageGauche {
    0% {
        transform: translateX(0px) translateZ(14px) rotateY(3deg);
        visibility: visible;
    }
    75% {
        transform: translateX(var(--gapLivre)) translateZ(14px) rotateY(177deg);
        visibility: visible;
    }
    99% {
        transform: translateX(var(--gapLivre)) translateZ(14px) rotateY(177deg);
        visibility: hidden;
    }
    100% {
        transform:  translateX(0px) translateZ(14px) rotateY(2deg) ;
        visibility: hidden;
    }
}

@keyframes pageDroite {
    0% {
        transform: translateX(0px) translateZ(14px) rotateY(-3deg);
        visibility: visible;
    }

    75% {
        transform: translateX(calc(-1 * var(--gapLivre))) translateZ(14px) rotateY(-177deg);
        visibility: visible;
    }
    99% {
        transform: translateX(calc(-1 * var(--gapLivre))) translateZ(14px) rotateY(-177deg);
        visibility: hidden;
    }
    100% {
        transform:  translateX(0px) translateZ(14px) rotateY(-2deg) ;
        visibility: hidden;
    }
}

@keyframes bandeGauche {
    0% {
        transform: rotateY(1deg);
    }

    25% {
        transform: rotateY(-7deg);
    }

    50% {
        transform: rotateY(-15deg);
    }

    75% {
        transform: rotateY(-18deg);
    }

    98% {
        transform: rotateY(-0deg);

    }
    99% {
        transform: rotateY(-1deg);

    }
    100% {
        transform: rotateY(1deg);
    }
}

@keyframes bandeDroite {
    0% {
        transform: rotateY(-1deg);
    }

    25% {
        transform: rotateY(7deg);
    }

    50% {
        transform: rotateY(15deg);
    }

    75% {
        transform: rotateY(18deg);
    }

    98% {
        transform: rotateY(0deg);

    }
    99% {
        transform: rotateY(1deg);

    }
    100% {
        transform: rotateY(-1deg);
    }
}